# 协议转换插件

主要是将RPC协议转成HTTP协议,HTTP转HTTP暂时没有考虑。

## 背景

场景1：内部项目

常规项目分为后端svc服务以及前台api服务，api接口服务负责处理参数验证，用户权限，以及调用后端svc服务结合数据。针对业务简单的场景，就需要在2个项目中做修改，是否可以减少api修改的需求呢，只改svc服务？

场景2: 外部项目

比如A部门的后端服务是基于RPC协议的，与B部门有系统交互，但B部门用的是HTTP协议，此时A部门就需要开发一个HTTP协议的接口，是否可以不用开发呢？

## 方案

在网层做一层通用能力的协议转换，将HTTP协议转成成RPC协议请议。这样只需要开发好RPC协议，然后在网关层配置接口映射关系就可以了。

## 实现

### 后台配置

下图是后台的一个协议转换配置功能，主体是基于RPC框泛化原理。

[![rpc-http-protocol.png](https://i.postimg.cc/nVQgmJmd/rpc-http-protocol.png)](https://postimg.cc/qg41fWjn)

## 问题

1、目前配置是手动的，当接口多时维护成本相对高

2、测试环境与生产环境需要单独配置，管理成本相对高